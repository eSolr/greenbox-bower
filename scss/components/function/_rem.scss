//	@desc		REM value converter with built in ie8 fallback
//	@name
//	@author		Armin
//	@tested
//	@requires	_esolr-settings.scss ($ie8, $warning)


//	Resource
//	http://dpi.lv/#17.3″


//	Converts argument or list of arguments to rem value or list of rem value.
//	The unit of argument and $es-rem-base has to match to get a valid rem value.
//	Otherwise it returns the original argument. If $ie8 compatibility is set
//	to true, the px/pt/etc. fallback become active.
//
//	Usage:	$es-rem-base: 16px;	@warn rem(16px); 		// 1rem
//			$es-rem-base: 16pt;	@warn rem(16pt); 		// 1rem
//			$es-rem-base: 100%;	@warn rem(100%); 		// 1rem
//			$es-rem-base: 16px;	@warn rem(18pt); 		// 18pt
//			$es-rem-base: 16px;	@warn rem(8px 24px); 	// 0.5rem 1.5rem


@if not global-variable-exists(ie8) { $ie8: false !global; }
@if not global-variable-exists(warning) { $warning: false !global; }

//
//	megnézni, hogy rem-e
//	megnézni, hogy a base px-e
//


$client-dpi-for-rem-base: 96 !global;

@mixin setClientDpi($arg) {
	$client-dpi-for-rem-base: $arg !global;
}

@media
only screen and (-webkit-min-device-pixel-ratio: 1),
only screen and (min-resolution: 1dppx),
only screen and (min-resolution: 96dpi) {
	@include setClientDpi(96);
}

@media
only screen and (-webkit-min-device-pixel-ratio: 1.3),
only screen and (min-resolution: 1.3dppx),
only screen and (min-resolution: 144dpi) {
	@include setClientDpi(144);
}

@media
only screen and (-webkit-min-device-pixel-ratio: 1.5),
only screen and (min-resolution: 1.5dppx),
only screen and (min-resolution: 196dpi) {
	@include setClientDpi(196);
}


//	pt 2 px conversion
@function pt2px($arg) {
	@if (unit($arg) == pt) {
		$arg: $arg / ($arg * 0 + 1);
		@return round($arg * (96 / 72));
	}
	@else {
		@return $arg;
	}
}



//	Convert rem value to px/pt using the unit of base rem value.
//	Any other unit remains original.
@function rem($arg) {

	$arg-list: ();
	$ie7: false !default !global;
	$ie8: false !default !global;

	@if ($ie8 or $ie7) {
		@if (type_of($arg) == list) {
			@each $i in $arg { $arg-list: append($arg-list, rem($i)); }
			@return $arg-list;
		}
		@else if (type-of($arg) == number) {

			@if (unit($arg) == rem and (unit($base-rem-value) == pt or unit($base-rem-value) == px)) {		// if arg is rem and base rem value is pt or px
				@return ($arg / ($arg * 0 + 1)) * $base-rem-value;
			}
			@else {
				@return $arg;												// if arg is not rem
			}
		}
	}
	@else {
		@return $arg;
	}
}



@function no-rem($arg) {
	@if unit($arg) == rem {
		@return $es-rem-base * ($arg / 1rem);
	}
	@if global-variable-exist(warning) {
		@if $warning {@warn "Excursive unit. Argument is not a 'rem' value.";}
	}
	@return $arg;
}